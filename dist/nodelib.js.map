{"version":3,"sources":["webpack:///webpack/bootstrap fdffcbdffa4b8351acc0","webpack:///./src/node/index.coffee","webpack:///./src/node/context.coffee","webpack:///external \"lodash\"","webpack:///./src/node/error.coffee","webpack:///./src/node/metadata.coffee","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///external \"js-yaml\"","webpack:///./src/node/code.coffee","webpack:///external \"os\"","webpack:///./src/node/module.coffee","webpack:///(webpack)/buildin/module.js","webpack:///external \"node-uuid\"","webpack:///./src/node/route.coffee","webpack:///./src/node ^\\.\\/.*$","webpack:///./src/node/util.coffee"],"names":[],"mappings":"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","file":"nodelib.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fdffcbdffa4b8351acc0","# Id: nodelib/0.0.5-dev+20161126-0155 src/node/index.coffee\n\nversion = \"0.0.5-dev+20161126-0155\" # nodelib\n\n\nmodule.exports =\n  Context: require './context'\n  metadata: require './metadata'\n  module: require './module'\n  route: require './route'\n  error: require './error'\n  util: require './util'\n  version: version\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/index.coffee","###\nA coffeescript implementation of a context\nwith inheritance and override.\n\nSee also dotmpe/invidia for JS\n###\n_ = require 'lodash'\n\nerror = require './error'\n\n\nctx_prop_spec = ( desc ) ->\n  _.defaults desc,\n    enumerable: false\n    configurable: true\n\nrefToPath = ( ref ) ->\n  if not ref.match /#\\/.*/\n    throw new Error \"Absolute JSON ref only support\"\n  ref.substr(2).replace /\\//g, '.'\n\nclass Context\n\n  ###\n    Obj. hierarchy with dynamic, inherited properties.\n  ###\n\n  constructor: ( init, ctx=null ) ->\n    @_instance = ++ Context._i\n    # Provide path to super context\n    @context = ctx\n    # XXX unused @_defaults = init\n    @_data = {}\n    @_subs = []\n    # XXX: re-create all properties from context, needed?\n    # Also what if wait until local is overriden..\n    if ctx and ctx._data\n      @prepare_from_obj ctx._data\n    # add properties for, and seed from init into local data\n    @add_data init\n\n  id: -> if @context then @context.id() + '.' + @_instance else @_instance\n  toString: -> 'Context:' + @id\n  isEmpty: -> _.isEmpty @_data and if @context then @context.isEmpty() else true\n  subs: -> @_subs # List subcontexts\n\n  # Seed property data from obj\n  seed: ( obj ) ->\n    for k, v of obj\n      @_data[ k ] = v\n    @\n\n  # Create local properties using keys in obj (ignores existing data keys)\n  prepare_from_obj: ( obj ) ->\n    for k, v of obj\n      @prepare_property k\n\n  prepare_all: ( keys ) ->\n    for k in keys\n      @prepare_property k\n\n  prepare_property: ( k ) ->\n      if k of @_data\n        return\n      @_ctx_property k,\n        get: @_ctxGetter( k )\n        set: @_ctxSetter( k )\n    @\n\n  # new subcontext, inherits current instance, optional new or override vars\n  getSub: ( init ) ->\n    class SubContext extends Context\n      constructor: ( init, sup ) ->\n        Context.call @, init, sup\n    sub = new SubContext init, @\n    @_subs.push sub\n    sub\n\n  # Short cut for adding new attributes from data\n  add_data: ( obj ) -> @prepare_from_obj obj; @seed obj\n\n  # get an object by json path reference,\n  get: ( path ) ->\n    p = path.split '.'\n    c = @\n    while p.length\n      name = p.shift()\n      if name of c\n        c = c[ name ]\n      else\n        console.error \"no #{name} of #{path} in\", c\n        throw new error.NonExistantPathElementException(\n          \"Unable to get #{name} of #{path}\" )\n    c\n\n  # get an object by json path reference,\n  # and resolve all contained references too\n  resolve: ( path, defaultValue ) ->\n\n    p = path.split '.'\n    c = self = @\n\n    # resolve an object with $ref key\n    _deref = (o) ->\n      ls = o\n      rs = self.get refToPath o.$ref\n      if _.isPlainObject rs\n        rs = _.merge ls, rs\n      rs\n\n    # replace current with referenced path\n    if '$ref' of c\n      try\n        c = _deref c\n      catch error\n        if defaultValue?\n          return defaultValue\n        throw error\n\n    while p.length\n\n      # replace current with sub at next path element\n      name = p.shift()\n      if name of c\n        c = c[ name ]\n\n        #if not _.isPlainObject( c )\n        if not _.isObject( c )\n          continue\n\n        if '$ref' of c\n          try\n            c = _deref c\n          catch error\n            if defaultValue?\n              return defaultValue\n            throw error\n\n      else\n        console.error \"no #{name} of #{path} in\", c\n        throw new Error \"Unable to resolve #{name} of #{path}\"\n\n    if _.isPlainObject c\n      return @merge c\n\n    c\n\n  # XXX drop $ref from return value\n  _clean: ( c ) ->\n    for k, v of c\n      if _.isPlainObject v\n        w = _.clone v\n        if '$ref' of w\n          delete w.$ref\n        @_clean w\n        c[k] = w\n    c\n\n  # recurive resolve\n  merge: ( c ) ->\n    self = @\n    # recursively replace $ref: '..' with dereferenced value\n    # XXX this starts top-down, but forgets context. may need to globalize\n    merge = ( result, value, key ) ->\n      if _.isArray value\n        for item, index in value\n          merge value, item, index\n      else if _.isPlainObject value\n        if '$ref' of value\n          deref = self.get refToPath value.$ref\n          if _.isPlainObject deref\n            merged = self.merge deref\n            delete value.$ref\n            value = _.merge value, merged\n          else\n            value = deref\n        else\n          for key2, value2 of value\n            merge value, value2, key2\n\n      else if _.isString( value ) or _.isNumber( value ) or _.isBoolean( value )\n        null\n\n      else\n        throw new Error \"Unhandled value '#{value}'\"\n\n      result[ key ] = value\n\n      result\n\n    _.transform c, merge\n\n  to_dict: ->\n    d = {}\n    _ctx = @\n    while _ctx\n      d = _.merge d, _ctx._data\n      _ctx = _ctx.context\n    d\n\n\n  ## Private functions\n\n  _ctx_property: ( prop, desc ) ->\n    ctx_prop_spec desc\n    Object.defineProperty @, prop, desc\n\n  # return a getter for property `k`: returns local data or tries context\n  _ctxGetter: ( k ) ->\n    ->\n      if k of @_data\n        @_data[ k ]\n      else if @context?\n        @context[ k ]\n\n  # return a setter for property `k`: set into local data\n  _ctxSetter: ( k ) ->\n    ( newVal ) ->\n      @_data[ k ] = newVal\n\n\n  ## Class funcs\n\n  @count: ->\n    return Context._i\n\n  @reset: ->\n    Context._i = 0\n\n\n# Class vars\nContext.reset()\nContext.name = \"context-mpe\"\n\nmodule.exports = Context\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/context.coffee","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 3\n// module chunks = 0","\nclass NonExistantPathElementException extends Error then constructor: -> super\n\nmodule.exports =\n  types:\n    NonExistantPathElementException: NonExistantPathElementException\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/error.coffee","###\n\nLoad metadata for directories/files.\nData is stored in local files, can be in different formats.\n\nThis could get quite extensive. Currently only read YAML.\n\nWant some centralized or integrated storage (xattr, ldap)?\n\n###\n\npath = require 'path'\nfs = require 'fs'\nyaml = require 'js-yaml'\n_ = require 'lodash'\n\ncodelib = require './code'\n\n\ntypeIsArray = Array.isArray ||\n  ( value ) -> return {}.toString.call( value ) is '[object Array]'\n\n# TODO: metafile should support various directory formats\n#metafiles = [ 'main.*', 'module.*', '.meta' ]\nmetafiles = [ 'main.meta', 'module.meta', '.meta' ]\n\nloadDir = ( from_path ) ->\n  for metaf in metafiles\n    metap = path.join( from_path, metaf )\n    if fs.existsSync metap\n      return yaml.safeLoad fs.readFileSync metap, 'utf8'\n\nload = ( from_path, type ) ->\n  md = loadDir from_path\n  if _.isEmpty md\n    return\n  if _.isEmpty type\n    return md\n  if _.isArray md\n    for item in md\n      if item.type?\n        if item.type == type\n          return item\n  if _.isObject md\n    if md.type?\n      if md.type == type\n        return md\n    return null\n\n\n# Parse, fetch and return MVC metadata for module\nresolve_mvc_meta = ( from_path, meta ) ->\n\n  version = meta.type.split('/')[1]\n  meta.path = from_path\n  meta.ext_version = version\n\n  if not meta.components\n    meta.components = [ 'models', 'views', 'controllers' ]\n\n  for compname in meta.components\n    comppath = path.join( from_path, compname )\n    pathprop = compname.substring(0, compname.length-1) + 'Path'\n    meta[ pathprop ] = comppath\n\n  #for compname in meta.components\n  #  compidx = require comppath\n\n  #  if typeIsArray( compidx )\n  #    compcbs = compidx\n  #  else\n  #    compcbs = [ compidx ]\n\n  #  comps = []\n  #  for compcb in compcbs\n  #    if _.isFunction compcb\n  #      comps.push compcb meta\n  #    else\n  #      comps.push compcb\n\n  #  #meta[ compname ] = comps\n\n  meta\n\nmodule.exports =\n\n  loadDir: loadDir\n  load: load\n  resolve_mvc_meta: resolve_mvc_meta\n  readJrcModDef: ( md, name ) ->\n    from_file = path.join md.dir\n    data = fs.readFileSync from_file, 'ascii'\n    mdef = parseJrcHeader data\n    _.defaults mdef,\n      id: path.join md.name\n      deps: null\n      title: null\n      description: null\n  parseJrcHeader: ( str ) ->\n    header = codelib.firstComment str\n    m = {}\n    for head in header\n      p = head.indexOf ' '\n      if p == -1\n        continue\n      propname = head.substr 0, p\n      argstr = head.substr p+1\n      p = propname.indexOf ':'\n      if p == -1\n        continue\n      prefix = propname.substr 0, p\n      if prefix != 'jrc'\n        continue\n      key = propname.substr p+1\n      if key == 'export'\n        m.id = argstr.trim()\n      if key == 'import'\n        deps = argstr.trim().split(' ')\n        m.deps = deps\n      if key == 'description'\n        m.description = argstr.trim()\n      if key == 'title'\n        m.title = argstr.trim()\n    m\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/metadata.coffee","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 8\n// module chunks = 0","os = require 'os'\n\n_ = require 'lodash'\n\n\nclass LineReader\n  constructor: ( @str, @eol = os.EOL, @lines = [] ) ->\n  hasNext: ->\n    return ! _.isEmpty @str\n  next: ->\n    line\n    p = @str.indexOf @eol\n    if p > -1\n      line = @str.substr 0, p\n      @str = @str.substr p + @eol.length\n    else\n      line = @str\n      @str = ''\n    @lines.push line\n    return line\n\nisLineComment = ( line ) ->\n  line.trim().substr(0, 1) == '#'\n\ncleanLineComment = ( line ) ->\n  line.trim().substr(1).trim()\n\nfirstComment = ( str ) ->\n  lines = []\n  lineReader = new LineReader str\n  while lineReader.hasNext()\n    line = lineReader.next()\n    if isLineComment line\n      lines.push cleanLineComment line\n  lines\n\nmodule.exports =\n  firstComment: firstComment\n  isLineComment: isLineComment\n  cleanLineComment: cleanLineComment\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/code.coffee","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 10\n// module chunks = 0","###\n\n.mpe 2015 Some code to quickly start an extensible Express app.\n\n  'express-mvc/0.1'\n\n  'express-mvc-ext/0.1'\n\n###\npath = require 'path'\n\n_ = require 'lodash'\nuuid = require 'node-uuid'\n\nmetadata = require './metadata'\napplyRoutes = require('./route').applyRoutes\n\napplyParams = ( app, context ) ->\n  if context.params\n    for name, handler of context.params\n      app.param( name, handler )\n\n\nclass Component\n\n  constructor: ( opts ) ->\n    {@app, @server, @root, @pkg, @config, @meta, @url, @path, @route} = opts\n    @base = {}\n    @controllers = {}\n    @routes = {}\n    @models = {}\n    @params = {}\n\n  @load_config: ( name ) ->\n    {}\n\n  configure: ->\n    console.log \"TODO component.configure\", [\n      @name, @meta, @base, @path, @route ]\n    @load_controllers()\n\n  load_models: ->\n    #knex = @app.get('knex.main')\n    #if not knex\n    #  knex = require('knex')(@config.database.main)\n    #  @app.set('knex.main', knex)\n    #  #console.log(chalk.grey('Initialized main DB conn'))\n    # FIXME Component.load_models\n    #Base = Bookshelf.initialize(knex)\n    #@modelbase = Bookshelf.session = Base\n    # Prepare Bookshelf.{model,collection} registries\n    Base.plugin 'registry'\n\n  load_controllers: ->\n    if ! @meta.controllers\n      console.warn 'No controllers for component', @name\n      return\n\n    cs = @meta.controllers\n    if _.isArray cs\n      @load_controller_names()\n    else if _.isObject( cs ) and not _.isEmpty cs\n      @update_controller cs\n\n  load_model: ( name ) ->\n    if not @models[name]\n      modpath = path.join @modelPath, name\n      @models[name] = require(modpath).define(@modelbase)\n    @models[name]\n\n  load_controller_names: ->\n    p = @root || @path\n\n    # load configured controllers\n    for ctrl in @meta.controllers\n\n      ctrl_path = path.join( p, ctrl )\n      @controllers[ ctrl ] = require ctrl_path\n      try\n        updateObj = @controllers[ ctrl ] @, @base\n      catch err\n        console.error \"Unable to load #{ctrl}\"\n        throw err\n\n      @update_controller updateObj\n\n      console.log \"Component: #{@name} loaded\", ctrl, \"controller\"\n\n  update_controller: ( updateObj ) ->\n    #console.log @meta, updateObj\n    # update global meta object\n    comp = @core || @\n    if updateObj.meta\n      _.merge comp.meta, updateObj.meta\n\n    if updateObj.params\n      # keep params at local module\n      _.merge @params, updateObj.params\n\n    if updateObj.route\n      # keep routes at local module\n      _.merge @route, updateObj.route\n\n\nclass Core extends Component\n\n  constructor: (opts) ->\n    super opts\n    @name = @name || 'core'\n\n  configure: ->\n    p = @root || @path\n\n    @name = @name || @meta.name\n\n    if not @controllerPath\n      @controllerPath = path.join p, 'controllers'\n    if not @modelPath\n      @modelPath = path.join p, 'models'\n    if not @viewPath\n      @viewPath = path.join p, 'views'\n\n    @load_models()\n    @load_controllers()\n    @apply_controllers()\n\n  apply_controllers: ->\n    # pick of new routes from updateObj\n    _.extend @routes, applyRoutes( @app, @url, @ )\n\n    applyParams @app, @\n\n    if @meta.default_route\n      defroute = path.join( @url, @meta.default_route )\n      @app.all @url, @base.redirect(defroute)\n\n  # static init for core, relay app init to core module, then init\n  @config: ( md, core_path ) ->\n    core_file = path.join __noderoot, core_path, 'main'\n    core_seed_cb = require core_file\n    # Return core opts\n    opts = core_seed_cb core_path\n    _.defaults opts, route: {}\n    opts\n\n\nclass CoreV01 extends Core\n\n  ###\n\n  | Encapsulate Express MVC for extension.\n  | XXX what to use for models?\n\n  - views\n  - models\n  - controllers\n\n  ###\n\n  constructor: (opts) ->\n    super opts\n    @modules = {}\n\n  configure: ->\n    # url must point to netpath, WITHOUT any *path* part (ie. including root)\n    # so any sub-component can deal with abs or rel paths\n    @url = @url || ''\n    #@viewPath = @app.get 'views'\n    @modelPath = path.join @root, 'models'\n\n    # Add some more locals for Jade templates\n    self = @\n    @app.use (req, res, next) ->\n      res.locals.core = self\n      res.locals.modules = []\n      next()\n\n    super\n\n  ###\n    CoreV01.load_modules\n  ###\n  load_modules: ->\n    modroot = path.join __noderoot, @config.src || 'src'\n    mods = _.extend( [], @config.modules, @meta.modules )\n    for modpath in mods\n      fullpath = path.join( modroot, modpath )\n      mod = ModuleV01.load( @, fullpath )\n      mod.configure()\n      @modules[ mod.meta.name ] = mod\n      console.log 'Loaded module', modpath, mod.meta.name\n      console.log mod.route\n\n  ###\n    CoreV01.get_all_components\n  ###\n  get_all_components: ->\n    comps = [ @ ]\n    _.union comps, _.values( @modules )\n\n  start: ->\n    self = @\n    @server.listen @app.get(\"port\"), ->\n      console.log \"Express server listening on port \" + self.app.get(\"port\")\n\n  # Static\n\n  @DEFAULT_METADATA: [\n    type: 'express-mvc-core/0.2'\n  ]\n\n  @SUPPORTED: [ 'express-mvc-core/0.1', 'express-mvc-core/0.2' ]\n\n  @load: ( core_path ) ->\n    md = metadata.load core_path\n    if !md\n      console.warn \"No metadata for core\", core_path\n      md = CoreV01.DEFAULT_METADATA\n    for mdc in md\n      if not 'type' of mdc\n        continue\n      if mdc.type in CoreV01.SUPPORTED\n        return CoreV01.load_from_metadata core_path, mdc\n    throw new Error \"No known core interface on module at #{core_path}\"\n\n  @load_from_metadata: ( core_path, mdc ) ->\n    # XXX sync with module.load\n    CoreClass = CoreV01\n    #md = metadata.resolve_mvc_meta core_path, mdc\n    #CoreClass = module_classes[ md.ext_version ]\n    opts = CoreClass.config [ mdc ], core_path\n    return new CoreClass opts\n\n\nclass ModuleV01 extends Component\n\n  ###\n\n  | Handle Express MVC extension modules.\n\n  - handlers\n  - routes\n\n  ###\n\n  # Get new instance holding module metadata and config.\n  constructor: ( opts ) ->\n    {@core} = opts\n    if !opts.name\n      opts.name = 'ModuleV01'\n    super opts\n\n  # Static\n\n  @DEFAULT_METADATA: [\n    type: 'express-mvc-ext/0.2'\n  ]\n\n  @SUPPORTED: [ 'express-mvc-ext/0.1', 'express-mvc-ext/0.2' ]\n\n  @load: ( core, from_path ) ->\n    md = metadata.load from_path\n    if !md\n      console.warn \"No metadata for module\", from_path\n      md = ModuleV01.DEFAULT_METADATA\n    for mdc in md\n      if not 'type' of mdc\n        continue\n      if mdc.type in ModuleV01.SUPPORTED\n        return ModuleV01.load_from_metadata core, from_path, mdc\n    throw new Error \"No known extension interface on module at #{from_path}\"\n\n  @load_from_metadata: ( core, from_path, mdc ) ->\n    md = metadata.resolve_mvc_meta from_path, mdc\n    if !md.controllers\n      console.error \"Missing MVC meta for \", mdc\n    ModuleClass = module_classes[ md.ext_version ]\n    opts = ModuleClass.config core, md, from_path\n    return new ModuleClass opts\n\n  @config: ( core, md, from_path ) ->\n    meta: md || name: md.name\n    config: md.config || {}\n    route: md.route || {}\n    core: core\n    app: core.app\n    base: core.base\n    path: from_path\n\n\nmodule_classes = {\n  '0.1': ModuleV01\n  '0.2': ModuleV01\n}\n\n# set globals to track projects and apps\n#\nsession = {\n  instances: { },\n  projects: { },\n  apps: { }\n}\n\ninit = ( node_path, app_path=null ) ->\n  if not session.projects[node_path]\n    code_id = uuid.v4()\n    session.projects[node_path] = code_id\n  else\n    code_id = session.projects[node_path]\n\n  global.__noderoot = node_path\n\n\nload_core = ( app_path ) ->\n  global.__approot = app_path\n  app_id\n\n  if not session.apps[app_path]\n    app_id = uuid.v4()\n    session.apps[app_path] = app_id\n  else\n    app_id = session.apps[app_path]\n\n  global.__appid = app_id\n\n  if not session.instances[app_id]\n    session.instances[app_id] = core = CoreV01.load( app_path )\n\n  else\n    core = session.instances[app_id]\n\n  core\n\n\nload_module = ( mod_path ) ->\n  module.configure extroot\n  module.load app\n\n\nmodule.exports = {\n  session: session\n  init: init\n  classes:\n    Core: CoreV01\n    Module: ModuleV01\n  load_core: load_core,\n  #load_module: load_module,\n  load_and_start: ( app_path ) ->\n    init process.cwd()\n    core = load_core app_path\n    core.configure()\n    core.load_modules()\n    core.start()\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/module.coffee","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tmodule.children = [];\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 12\n// module chunks = 0","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 13\n// module chunks = 0","###\nMetadata to Express helpers.\n\n###\n_ = require 'lodash'\n\n\n# XXX Init one-off controller instance to handle str-spec callback..\nresolveHandler = (module, cb) ->\n  [ type, name ] = cb.substr( 0, cb.length - 1 ).split('(')\n  core = module.core\n  new core.base.type[ type ]( module, name )\n\n\napplyRoutes = (app, root, module) ->\n\n  if !app\n    throw new Error \"Missing app\"\n\n  routes = {}\n  for name, route of module.route\n    # full url\n    url = [ root, name ].join('/').replace('$', ':')\n    # recurse to sub-route\n    if route.route\n      subRoutes = applyRoutes app, url, route\n      _.extend routes, subRoutes\n    # apply current level\n    for method in ['all', 'get', 'put', 'post', 'options', 'delete']\n      cb = route[method]\n      if cb\n        #console.log url, method\n        # Track all routes?\n        if url not of routes\n          routes[url] = {}\n        if method of routes[url]\n          console.error \"Already routed: \", method, url\n        routes[url][method] = cb\n        # Apply to Express; ie. app.get( url, callback )\n        if _.isArray cb\n          app[method].apply app, [ url, cb... ]\n        else if _.isString cb\n          h = resolveHandler( module, cb )\n          app[method] url, _.bind h[method], h\n        else\n          app[method] url, cb\n  routes\n\nmodule.exports =\n\n  applyRoutes: applyRoutes\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/route.coffee","var map = {\n\t\"./code\": 9,\n\t\"./code.coffee\": 9,\n\t\"./context\": 2,\n\t\"./context.coffee\": 2,\n\t\"./error\": 4,\n\t\"./error.coffee\": 4,\n\t\"./index\": 1,\n\t\"./index.coffee\": 1,\n\t\"./metadata\": 5,\n\t\"./metadata.coffee\": 5,\n\t\"./module\": 11,\n\t\"./module.coffee\": 11,\n\t\"./route\": 14,\n\t\"./route.coffee\": 14,\n\t\"./util\": 16,\n\t\"./util.coffee\": 16\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 15;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/node ^\\.\\/.*$\n// module id = 15\n// module chunks = 0","###*\n# Formats mongoose errors into proper array\n#\n# @param {Array} errors\n# @return {Array}\n# @api public\n###\n\nexports.errors = (errors) ->\n  keys = Object.keys(errors)\n  errs = []\n  # if there is no validation error, just display a generic error\n  if !keys\n    return [ 'Oops! There was an error' ]\n  keys.forEach (key) ->\n    errs.push errors[key].message\n    return\n  errs\n\n###*\n# Index of object within an array\n#\n# @param {Array} arr\n# @param {Object} obj\n# @return {Number}\n# @api public\n###\n\nexports.indexof = (arr, obj) ->\n  index = -1\n  # not found initially\n  keys = Object.keys(obj)\n  # filter the collection with the given criterias\n  result = arr.filter((doc, idx) ->\n    # keep a counter of matched key/value pairs\n    matched = 0\n    # loop over criteria\n    i = keys.length - 1\n    while i >= 0\n      if doc[keys[i]] == obj[keys[i]]\n        matched++\n        # check if all the criterias are matched\n        if matched == keys.length\n          index = idx\n          return idx\n      i--\n    return\n  )\n  index\n\n###*\n# Find object in an array of objects that matches a condition\n#\n# @param {Array} arr\n# @param {Object} obj\n# @param {Function} cb - optional\n# @return {Object}\n# @api public\n###\n\nexports.findByParam = (arr, obj, cb) ->\n  index = exports.indexof(arr, obj)\n  if ~index and typeof cb == 'function'\n    return cb(undefined, arr[index])\n  else if ~index and !cb\n    return arr[index]\n  else if ! ~index and typeof cb == 'function'\n    return cb('not found')\n  # else undefined is returned\n  return\n\n\n\n// WEBPACK FOOTER //\n// ./src/node/util.coffee"],"sourceRoot":""}